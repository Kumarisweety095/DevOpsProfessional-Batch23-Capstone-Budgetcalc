---
- name: Create pods using deployment 
  hosts: master
  tasks:
  - name: copy deployment file to kubernetes master
    copy: 
      src: budgetcalc.yml
      dest: /root/

  - name: create a deployment
    command: kubectl apply -f /root/budgetcalc.yml
 
  - name: update deployment with new pods if image updated in docker hub
    command: kubectl rollout restart deployment.v1.apps/budgetcalc -n project
